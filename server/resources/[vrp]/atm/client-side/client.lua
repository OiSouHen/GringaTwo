-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
local Proxy = module("vrp","lib/Proxy")
vRP = Proxy.getInterface("vRP")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONNECTION
-----------------------------------------------------------------------------------------------------------------------------------------
cRP = {}
Tunnel.bindInterface("atm",cRP)
vSERVER = Tunnel.getInterface("atm")
-----------------------------------------------------------------------------------------------------------------------------------------
-- ATM:OPENSYSTEM
-----------------------------------------------------------------------------------------------------------------------------------------
AddEventHandler("atm:openSystem",function()
	if vSERVER.requestWanted() then
		SetNuiFocus(true,true)
		vRP._playAnim(false,{"amb@prop_human_atm@male@base","base"},true)
		SendNUIMessage({ action = "show" })
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- ATM:UPDATE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNetEvent("atm:Update")
AddEventHandler("atm:Update",function(action)
	SendNUIMessage({ action = action })
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- CLOSE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("close",function(data)
	SetNuiFocus(false,false)
	SendNUIMessage({ action = "hide" })
	vRP._playAnim(false,{"amb@prop_human_atm@male@exit","exit"},false)
	Citizen.Wait(4000)
	vRP._stopAnim()
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- DEPOSIT
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("deposit",function(data)
	if parseInt(data["value"]) > 0 then
		vSERVER.bankDeposit(data["value"])
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- WITHDRAW
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("withdraw",function(data)
	if parseInt(data["value"]) > 0 then
		vSERVER.bankWithdraw(data["value"])
	end
end)